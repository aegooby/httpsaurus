"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[558],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),u=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return n?o.createElement(f,i(i({ref:t},c),{},{components:n})):o.createElement(f,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},9261:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return c},default:function(){return p}});var o=n(7462),r=n(3366),a=(n(7294),n(3905)),i=["components"],s={id:"hooks",title:"Hooks",slug:"/client/react/hooks"},l=void 0,u={unversionedId:"Client/React/hooks",id:"Client/React/hooks",isDocsHomePage:!1,title:"Hooks",description:"The official React docs about hooks are",source:"@site/docs/Client/React/hooks.md",sourceDirName:"Client/React",slug:"/client/react/hooks",permalink:"/turtle/docs/client/react/hooks",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/Client/React/hooks.md",version:"current",frontMatter:{id:"hooks",title:"Hooks",slug:"/client/react/hooks"},sidebar:"sidebar",previous:{title:"Components",permalink:"/turtle/docs/client/react/components"},next:{title:"Client",permalink:"/turtle/docs/client/client"}},c=[{value:"<code>useStartLoading</code> and <code>useFinishLoading</code>",id:"usestartloading-and-usefinishloading",children:[]},{value:"<code>useToken</code>",id:"usetoken",children:[]},{value:"<code>useRefresh</code>",id:"userefresh",children:[]}],d={toc:c};function p(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The official React docs about hooks are\n",(0,a.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-intro.html"},"here"),". You know you can Google\nthese, right?"),(0,a.kt)("p",null,"Of course because my old friend Mark Zuckersdottir at Facebook hasn't gotten\naround to it yet, I've had to make some custom hooks. Here they are."),(0,a.kt)("h2",{id:"usestartloading-and-usefinishloading"},(0,a.kt)("inlineCode",{parentName:"h2"},"useStartLoading")," and ",(0,a.kt)("inlineCode",{parentName:"h2"},"useFinishLoading")),(0,a.kt)("p",null,"Can you guess what these do? I'll give you 30 seconds. Wrong. These hooks\ncontrol the loading bar that shows up at the top of the screen. It's rare to\nhave to use these, although you do want to use them if you manually redirect a\nuser. For example,"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useFinishLoading, useStartLoading } from "./Core/Core.tsx";\n\nconst mutation = graphql`\n    mutation ComponentMutation {\n        componentMutation\n    }\n`;\nexport default function Component() {\n  const [commit, _isInFlight] = Relay.useMutation(mutation);\n  const navigate = ReactRouter.useNavigate();\n\n  const onSubmit = function () {\n    const onCompleted = function (data: unknown) {\n      Console.log(data);\n      navigate("/", {\n        state: { redirected: true },\n      });\n    };\n\n    const onError = function (error: Error) {\n      Console.error(error);\n      useFinishLoading();\n    };\n\n    useStartLoading();\n    commit({\n      variables: {},\n      onCompleted: onCompleted,\n      onError: onError,\n    });\n  };\n\n  const element: React.ReactElement = <></>;\n  return element;\n}\n')),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"You have to pass in ",(0,a.kt)("inlineCode",{parentName:"p"},"{ state: { redirected: true } }")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"navigate()"),". You HAVE\nto. Because I said so. Otherwise it doesn't work."))),(0,a.kt)("h2",{id:"usetoken"},(0,a.kt)("inlineCode",{parentName:"h2"},"useToken")),(0,a.kt)("p",null,"Arguments:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"value?: string | null")," ",(0,a.kt)("em",{parentName:"li"},"(optional)"),", the value of the token.")),(0,a.kt)("p",null,"Returns: the token, or ",(0,a.kt)("inlineCode",{parentName:"p"},"undefined")," if it doesn't exist."),(0,a.kt)("p",null,"If ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," isn't provided, the value of the token is returned. If it's a\n",(0,a.kt)("inlineCode",{parentName:"p"},"string"),", then the token is set to ",(0,a.kt)("inlineCode",{parentName:"p"},"value"),". If it's ",(0,a.kt)("inlineCode",{parentName:"p"},"null"),", the token is cleared\n(used to log out a user)."),(0,a.kt)("h2",{id:"userefresh"},(0,a.kt)("inlineCode",{parentName:"h2"},"useRefresh")),(0,a.kt)("p",null,"Arguments:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"fetchRefresh: () => Promise<unknown>"),", the function used to fetch the refresh\ntoken.")),(0,a.kt)("p",null,"Returns: a pair containing a function to indicate loading status, and an effect\nfunction to fetch the token on refresh."),(0,a.kt)("p",null,"This is literally ever only used once, so if you're using this you tripping.\nExample:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'import { Client } from "../client/client.ts";\nimport { useRefresh } from "./Core/Core.tsx";\n\n// ...\n\nexport default function App() {\n  const [loading, effect] = useRefresh(Client.fetchRefresh);\n  React.useEffect(effect, []);\n  if (loading()) {\n    return <Spinner />;\n  } else {\n    return <Content />;\n  }\n}\n')))}p.isMDXComponent=!0}}]);